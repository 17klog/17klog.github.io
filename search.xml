<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>CentOS7安装hadoop-1.2.1</title>
      <link href="/2019/11/13/CentOS7%E5%AE%89%E8%A3%85hadoop-1.2.1/"/>
      <url>/2019/11/13/CentOS7%E5%AE%89%E8%A3%85hadoop-1.2.1/</url>
      
        <content type="html"><![CDATA[<h1 id="CentOS7安装hadoop-1-2-1"><a href="#CentOS7安装hadoop-1-2-1" class="headerlink" title="CentOS7安装hadoop-1.2.1"></a>CentOS7安装hadoop-1.2.1</h1><p>分布式环境：</p><table><thead><tr><th>master</th><th>slave1</th><th>slave2</th></tr></thead><tbody><tr><td>centos7</td><td>centos7</td><td>centos7</td></tr><tr><td>1c</td><td>1c</td><td>1c</td></tr><tr><td>2G</td><td>1G</td><td>1G</td></tr><tr><td>192.168.18.30</td><td>192.168.18.31</td><td>192.168.18.32</td></tr></tbody></table><h2 id="0-初始化三个节点"><a href="#0-初始化三个节点" class="headerlink" title="0.初始化三个节点"></a>0.初始化三个节点</h2><p>配置环境变量</p><ul><li>更改主机名分别为master、slave1、slave2</li><li>配置ssh秘钥验证，达到任一节点无需密码验证登录其他站点root用户的效果</li><li>配置/etc/hosts文件，使任一节点通过master、slave1、slave2即可域名解析到对应节点IP</li></ul><p>关闭防火墙</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]<span class="comment"># vim /etc/selinux/config</span></span><br><span class="line">...</span><br><span class="line">SELINUX=disabled</span><br><span class="line">...</span><br><span class="line">[root@master ~]<span class="comment"># setenforce 0</span></span><br><span class="line">[root@master ~]<span class="comment"># getenforce</span></span><br><span class="line">Permissive</span><br><span class="line">[root@master ~]<span class="comment"># systemctl stop firewalld</span></span><br><span class="line">[root@master ~]<span class="comment"># systemctl disable firewalld</span></span><br><span class="line">另外从节点也要执行</span><br></pre></td></tr></table></figure><h2 id="1-安装java"><a href="#1-安装java" class="headerlink" title="1.安装java"></a>1.安装java</h2><p>下载hadoop和jdk安装包到/usr/local/src目录下</p><blockquote><p><a href="https://archive.apache.org/dist/hadoop/core/hadoop-1.2.1/hadoop-1.2.1-bin.tar.gz" target="_blank" rel="noopener">https://archive.apache.org/dist/hadoop/core/hadoop-1.2.1/hadoop-1.2.1-bin.tar.gz</a><br><a href="https://repo.huaweicloud.com/java/jdk/6u45-b06/jdk-6u45-linux-x64.bin" target="_blank" rel="noopener">https://repo.huaweicloud.com/java/jdk/6u45-b06/jdk-6u45-linux-x64.bin</a></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master src]<span class="comment"># ls</span></span><br><span class="line">hadoop-1.2.1-bin.tar.gz  jdk-6u45-linux-x64.bin</span><br></pre></td></tr></table></figure><p>给予<code>jdk-6u45-linux-x64.bin</code>可执行权限，执行如下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master src]<span class="comment"># ./jdk-6u45-linux-x64.bin</span></span><br></pre></td></tr></table></figure><p>可得如下目录：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master src]<span class="comment"># ls -ld jdk1.6.0_45</span></span><br><span class="line">drwxr-xr-x. 8 root root 176 3月  27 2013 jdk1.6.0_45</span><br></pre></td></tr></table></figure><p>将该目录移动到<code>/usr/local</code>下（个人习惯）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master jdk1.6.0_45]<span class="comment"># pwd</span></span><br><span class="line">/usr/<span class="built_in">local</span>/jdk1.6.0_45</span><br></pre></td></tr></table></figure><p>此目录即为java的安装目录，现在需要将java的相关变量声明命令添加到对于脚本中。在此选择添加到<code>/etc/bashrc</code>文件中。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@master jdk1.6.0_45]<span class="comment"># tail -n 5 /etc/bashrc</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/usr/<span class="built_in">local</span>/jdk1.6.0_45</span><br><span class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$CLASSPATH</span>:<span class="variable">$JAVA_HOME</span>/lib</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@master jdk1.6.0_45]<span class="comment"># source /etc/bashrc</span></span><br><span class="line">[root@master jdk1.6.0_45]<span class="comment"># which java</span></span><br><span class="line">/usr/<span class="built_in">local</span>/jdk1.6.0_45/bin/java</span><br><span class="line">[root@master jdk1.6.0_45]<span class="comment"># java -version</span></span><br><span class="line">java version <span class="string">"1.6.0_45"</span></span><br><span class="line">Java(TM) SE Runtime Environment (build 1.6.0_45-b06)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 20.45-b01, mixed mode)</span><br></pre></td></tr></table></figure><p>如法炮制，在slave1和slave2节点上安装java</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@slave1 ~]<span class="comment"># which java</span></span><br><span class="line">/usr/<span class="built_in">local</span>/jdk1.6.0_45/bin/java</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@slave2 ~]<span class="comment"># which java</span></span><br><span class="line">/usr/<span class="built_in">local</span>/jdk1.6.0_45/bin/java</span><br></pre></td></tr></table></figure><h2 id="2-安装hadoop"><a href="#2-安装hadoop" class="headerlink" title="2.安装hadoop"></a>2.安装hadoop</h2><p>解压安装包</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@master src]<span class="comment"># ls</span></span><br><span class="line">hadoop-1.2.1-bin.tar.gz  jdk-6u45-linux-x64.bin</span><br><span class="line">[root@master src]<span class="comment"># tar zxf hadoop-1.2.1-bin.tar.gz</span></span><br><span class="line">[root@master src]<span class="comment"># ls</span></span><br><span class="line">hadoop-1.2.1  hadoop-1.2.1-bin.tar.gz  jdk-6u45-linux-x64.bin</span><br></pre></td></tr></table></figure><p>移动新生成的目录到<code>/usr/local/</code>下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master hadoop-1.2.1]<span class="comment"># pwd</span></span><br><span class="line">/usr/<span class="built_in">local</span>/hadoop-1.2.1</span><br></pre></td></tr></table></figure><p>生成存放运行过程中临时文件的tmp目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master hadoop-1.2.1]<span class="comment"># mkdir tmp</span></span><br></pre></td></tr></table></figure><p>进入conf目录下，修改配置文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master conf]<span class="comment"># pwd</span></span><br><span class="line">/usr/<span class="built_in">local</span>/hadoop-1.2.1/conf</span><br></pre></td></tr></table></figure><p>修改masters文件，写入master节点的自定义域名</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master conf]<span class="comment"># cat masters</span></span><br><span class="line">master</span><br></pre></td></tr></table></figure><p>修改slaves文件，写入slave节点的自定义域名</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@master conf]<span class="comment"># cat slaves</span></span><br><span class="line">slave1</span><br><span class="line">slave2</span><br></pre></td></tr></table></figure><p>修改core-site.xml文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@master conf]<span class="comment"># vim core-site.xml</span></span><br><span class="line">...</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">        &lt;!--用来指定使用hadoop时产生文件的存放目录--&gt;</span><br><span class="line">        &lt;property&gt;</span><br><span class="line">                &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;</span><br><span class="line">                &lt;value&gt;/usr/<span class="built_in">local</span>/hadoop-1.2.1/tmp&lt;/value&gt;</span><br><span class="line">        &lt;/property&gt;</span><br><span class="line">        &lt;!--指定namenode的地址--&gt;</span><br><span class="line">        &lt;property&gt;</span><br><span class="line">                &lt;name&gt;fs.default.name&lt;/name&gt;</span><br><span class="line">                &lt;value&gt;hdfs://master:9000&lt;/value&gt;</span><br><span class="line">        &lt;/property&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure><p>修改mapred-site.xml文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@master conf]<span class="comment"># vim mapred-site.xml</span></span><br><span class="line">...</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">        &lt;!--作业跟踪管理器的HTTP服务器访问端口和地址--&gt;</span><br><span class="line">        &lt;property&gt;</span><br><span class="line">                &lt;name&gt;mapred.job.tracker&lt;/name&gt;</span><br><span class="line">                &lt;value&gt;http://master:9001&lt;/value&gt;</span><br><span class="line">        &lt;/property&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure><p>修改hdfs-site.xml文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@master conf]<span class="comment"># vim hdfs-site.xml</span></span><br><span class="line">...</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">        &lt;!--指定hdfs保存数据的副本数量--&gt;</span><br><span class="line">        &lt;property&gt;</span><br><span class="line">                &lt;name&gt;dfs.replication&lt;/name&gt;</span><br><span class="line">                &lt;value&gt;3&lt;/value&gt;</span><br><span class="line">        &lt;/property&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure><p>修改hadoop-env.sh脚本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@master conf]<span class="comment"># tail -n2 hadoop-env.sh</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/usr/<span class="built_in">local</span>/jdk1.6.0_45</span><br></pre></td></tr></table></figure><p>将/usr/local/hadoop-1.2.1目录拷贝到另外两个从节点：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master hadoop-1.2.1]<span class="comment"># rsync -azvP /usr/local/hadoop-1.2.1 root@slave1:/usr/local/</span></span><br><span class="line">[root@master hadoop-1.2.1]<span class="comment"># rsync -azvP /usr/local/hadoop-1.2.1 root@slave2:/usr/local/</span></span><br></pre></td></tr></table></figure><h2 id="3-启动集群"><a href="#3-启动集群" class="headerlink" title="3.启动集群"></a>3.启动集群</h2><p>初始化</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@master bin]<span class="comment"># pwd</span></span><br><span class="line">/usr/<span class="built_in">local</span>/hadoop-1.2.1/bin</span><br><span class="line">[root@master bin]<span class="comment"># ./hadoop namenode -format</span></span><br></pre></td></tr></table></figure><p>启动</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@master bin]<span class="comment"># ./start-all.sh</span></span><br><span class="line">[root@master bin]<span class="comment"># jps</span></span><br><span class="line">13144 JobTracker</span><br><span class="line">12906 NameNode</span><br><span class="line">13254 Jps</span><br><span class="line">13067 SecondaryNameNode</span><br></pre></td></tr></table></figure><p>尝试执行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@master bin]<span class="comment"># ./hadoop fs -ls /</span></span><br><span class="line">Found 1 items</span><br><span class="line">drwxr-xr-x   - root supergroup          0 2019-02-06 14:51 /usr</span><br><span class="line">[root@master bin]<span class="comment"># ./hadoop fs -put /etc/passwd /</span></span><br><span class="line">[root@master bin]<span class="comment"># ./hadoop fs -ls /</span></span><br><span class="line">Found 2 items</span><br><span class="line">-rw-r--r--   3 root supergroup        892 2019-02-06 14:53 /passwd</span><br><span class="line">drwxr-xr-x   - root supergroup          0 2019-02-06 14:51 /usr</span><br><span class="line">[root@master bin]<span class="comment"># ./hadoop fs -cat /passwd</span></span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">...</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2019/11/12/hello-world/"/>
      <url>/2019/11/12/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
